<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tch.system.mapper.YthTGaShlbjxxInfoMapper">

    <resultMap type="YthTGaShlbjxxInfo" id="YthTGaShlbjxxInfoResult">
        <result property="provincePullDataAuditId" column="province_pull_data_audit_id"/>
        <result property="sn" column="sn"/>
        <result property="fromCode" column="from_code"/>
        <result property="wsspXml" column="wssp_xml"/>
        <result property="nextXml" column="next_xml"/>
        <result property="suspendXml" column="suspend_xml"/>
        <result property="resumeXml" column="resume_xml"/>
        <result property="finishXml" column="finish_xml"/>
        <result property="expressXml" column="express_xml"/>
        <result property="auditTimestamp" column="audit_timestamp"/>
        <result property="createdTime" column="created_time"/>
        <result property="updatedTime" column="updated_time"/>
        <result property="version" column="version"/>
        <result property="createdUserId" column="created_user_id"/>
        <result property="updatedUserId" column="updated_user_id"/>
        <result property="formInfos" column="form_infos"/>
        <result property="record" column="record"/>
        <result property="isReflux" column="is_reflux"/>
    </resultMap>

    <sql id="selectYthTGaShlbjxxInfoVo">
        select province_pull_data_audit_id,
               sn,
               from_code,
               wssp_xml,
               next_xml,
               suspend_xml,
               resume_xml,
               finish_xml,
               express_xml,
               audit_timestamp,
               created_time,
               updated_time,
               version,
               created_user_id,
               updated_user_id,
               form_infos,
               record,
               is_reflux
        from JYXX.yth_t_ga_shlbjxx_info
    </sql>

    <select id="selectYthTGaShlbjxxInfoList" parameterType="YthTGaShlbjxxInfo" resultMap="YthTGaShlbjxxInfoResult">
        <include refid="selectYthTGaShlbjxxInfoVo"/>
        <where>
            <if test="sn != null  and sn != ''">and sn = #{sn}</if>
            <if test="fromCode != null  and fromCode != ''">and from_code = #{fromCode}</if>
            <if test="wsspXml != null  and wsspXml != ''">and wssp_xml = #{wsspXml}</if>
            <if test="nextXml != null  and nextXml != ''">and next_xml = #{nextXml}</if>
            <if test="suspendXml != null  and suspendXml != ''">and suspend_xml = #{suspendXml}</if>
            <if test="resumeXml != null  and resumeXml != ''">and resume_xml = #{resumeXml}</if>
            <if test="finishXml != null  and finishXml != ''">and finish_xml = #{finishXml}</if>
            <if test="expressXml != null  and expressXml != ''">and express_xml = #{expressXml}</if>
            <if test="auditTimestamp != null  and auditTimestamp != ''">and audit_timestamp = #{auditTimestamp}</if>
            <if test="createdTime != null ">and created_time = #{createdTime}</if>
            <if test="updatedTime != null ">and updated_time = #{updatedTime}</if>
            <if test="version != null ">and version = #{version}</if>
            <if test="createdUserId != null  and createdUserId != ''">and created_user_id = #{createdUserId}</if>
            <if test="updatedUserId != null  and updatedUserId != ''">and updated_user_id = #{updatedUserId}</if>
            <if test="formInfos != null  and formInfos != ''">and form_infos = #{formInfos}</if>
            <if test="record != null  and record != ''">and record = #{record}</if>
            <if test="isReflux != null ">and is_reflux = #{isReflux}</if>
        </where>
    </select>

    <select id="selectYthTGaShlbjxxInfoByProvincePullDataAuditId" parameterType="YthTGaShlbjxxInfo"
            resultMap="YthTGaShlbjxxInfoResult">
        <include refid="selectYthTGaShlbjxxInfoVo"/>
        where province_pull_data_audit_id = #{provincePullDataAuditId}
    </select>


    <select id="selectYthTGaShlbjxxStartTimeToEndTime" resultType="com.tch.system.domain.YthTGaShlbjxxInfo"
            resultMap="YthTGaShlbjxxInfoResult">
        <include refid="selectYthTGaShlbjxxInfoVo"/>
        WHERE 1 = 1
            AND
            created_time &gt;= TO_DATE('2024-01-02 00:00:00', 'YYYY-MM-DD HH24:MI:SS')
            AND created_time &lt;= SYSDATE
            AND updated_time IS NULL
            AND version = '1'
            <if test="provincePullDataAuditId != null and provincePullDataAuditId != ''">
                AND province_pull_data_audit_id = #{provincePullDataAuditId}
            </if>
            AND ROWNUM &lt;= 800
    </select>


    <select id="selectYthTGaShlbjxxVersion" parameterType="YthTGaShlbjxxInfo"
            resultMap="YthTGaShlbjxxInfoResult">
        <include refid="selectYthTGaShlbjxxInfoVo"/>
        WHERE
        updated_time IS NOT NULL
        AND
        version = '1'
        <if test="provincePullDataAuditId != null and provincePullDataAuditId != ''">
            AND province_pull_data_audit_id = #{provincePullDataAuditId}
        </if>
    </select>

    <insert id="insertYthTGaShlbjxxInfo" parameterType="YthTGaShlbjxxInfo">
        <!--        <selectKey keyProperty="provincePullDataAuditId" resultType="long" order="BEFORE">-->
        <!--            SELECT seq_yth_t_ga_shlbjxx_info.NEXTVAL as provincePullDataAuditId FROM DUAL-->
        <!--        </selectKey>-->
        insert into JYXX.yth_t_ga_shlbjxx_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="provincePullDataAuditId != null">province_pull_data_audit_id,</if>
            <if test="sn != null">sn,</if>
            <if test="fromCode != null">from_code,</if>
            <if test="wsspXml != null">wssp_xml,</if>
            <if test="nextXml != null">next_xml,</if>
            <if test="suspendXml != null">suspend_xml,</if>
            <if test="resumeXml != null">resume_xml,</if>
            <if test="finishXml != null">finish_xml,</if>
            <if test="expressXml != null">express_xml,</if>
            <if test="auditTimestamp != null">audit_timestamp,</if>
            <if test="createdTime != null">created_time,</if>
            <if test="updatedTime != null">updated_time,</if>
            <if test="version != null">version,</if>
            <if test="createdUserId != null">created_user_id,</if>
            <if test="updatedUserId != null">updated_user_id,</if>
            <if test="formInfos != null">form_infos,</if>
            <if test="record != null">record,</if>
            <if test="isReflux != null">is_reflux,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="provincePullDataAuditId != null">#{provincePullDataAuditId},</if>
            <if test="sn != null">#{sn},</if>
            <if test="fromCode != null">#{fromCode},</if>
            <if test="wsspXml != null">#{wsspXml},</if>
            <if test="nextXml != null">#{nextXml},</if>
            <if test="suspendXml != null">#{suspendXml},</if>
            <if test="resumeXml != null">#{resumeXml},</if>
            <if test="finishXml != null">#{finishXml},</if>
            <if test="expressXml != null">#{expressXml},</if>
            <if test="auditTimestamp != null">#{auditTimestamp},</if>
            <if test="createdTime != null">#{createdTime},</if>
            <if test="updatedTime != null">#{updatedTime},</if>
            <if test="version != null">#{version},</if>
            <if test="createdUserId != null">#{createdUserId},</if>
            <if test="updatedUserId != null">#{updatedUserId},</if>
            <if test="formInfos != null">#{formInfos},</if>
            <if test="record != null">#{record},</if>
            <if test="isReflux != null">#{isReflux},</if>
        </trim>
    </insert>

    <update id="updateYthTGaShlbjxxInfo" parameterType="YthTGaShlbjxxInfo">
        update JYXX.yth_t_ga_shlbjxx_info
        <trim prefix="SET" suffixOverrides=",">
            <if test="sn != null">sn = #{sn},</if>
            <if test="fromCode != null">from_code = #{fromCode},</if>
            <if test="wsspXml != null">wssp_xml = #{wsspXml},</if>
            <if test="nextXml != null">next_xml = #{nextXml},</if>
            <if test="suspendXml != null">suspend_xml = #{suspendXml},</if>
            <if test="resumeXml != null">resume_xml = #{resumeXml},</if>
            <if test="finishXml != null">finish_xml = #{finishXml},</if>
            <if test="expressXml != null">express_xml = #{expressXml},</if>
            <if test="auditTimestamp != null">audit_timestamp = #{auditTimestamp},</if>
            <if test="createdTime != null">created_time = #{createdTime},</if>
            <if test="updatedTime != null">updated_time = #{updatedTime},</if>
            <if test="version != null">version = #{version},</if>
            <if test="createdUserId != null">created_user_id = #{createdUserId},</if>
            <if test="updatedUserId != null">updated_user_id = #{updatedUserId},</if>
            <if test="formInfos != null">form_infos = #{formInfos},</if>
            <if test="record != null">record = #{record},</if>
            <if test="isReflux != null">is_reflux = #{isReflux},</if>
        </trim>
        where province_pull_data_audit_id = #{provincePullDataAuditId}
    </update>

    <delete id="deleteYthTGaShlbjxxInfoByProvincePullDataAuditId" parameterType="String">
        delete
        from JYXX.yth_t_ga_shlbjxx_info
        where province_pull_data_audit_id = #{provincePullDataAuditId}
    </delete>

    <delete id="deleteYthTGaShlbjxxInfoByProvincePullDataAuditIds" parameterType="String">
        delete from JYXX.yth_t_ga_shlbjxx_info where province_pull_data_audit_id in
        <foreach item="provincePullDataAuditId" collection="array" open="(" separator="," close=")">
            #{provincePullDataAuditId}
        </foreach>
    </delete>
</mapper>